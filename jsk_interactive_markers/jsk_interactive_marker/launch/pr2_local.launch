<launch>
  <arg name="rviz_config" default="$(find jsk_interactive_marker)/config/pr2_boxmovement.rviz"/>

  <include file="$(find jsk_pcl_ros)/launch/organized_multi_plane_segmentation.launch">
    <arg name="HANDLE_ESTIMATOR" value="true"/>
    <arg name="INPUT" value="/openni_c2/depth_registered/points"/>
  </include>

  <node pkg="rviz" type="rviz" name="rviz" args=" -d $(arg rviz_config)"/>

  <node pkg="jsk_interactive_marker" type="interactive_point_cloud" name="interactive_point_cloud" output="screen">
    <remap from="~handle_array" to="/handle_estimator/output"/>
    <remap from="~set_handle_pose" to="/handle_estimator/output_selected"/>
    <param name="handle_pose" value="/handle_estimator/output_best"/>
    <param name="use_moveit" value="false"/>
  </node>

  <node pkg="roseus" type="roseus" name="ik_controller" args="$(find jsk_interactive_marker)/euslisp/ik-controller-main.l" output="screen">
    <param name="robot" value="PR2"/>
    <param name="start_ik" value="false"/>
    <param name="use_ik_server" value="false"/>
    <param name="frame_id" value="base_footprint"/>
  </node>

  <!-- MOVE IT-->
  <include file="$(find jsk_pr2_startup)/jsk_pr2_moveit/start_pr2_moveit.launch"/>
</launch>